<!--
@license
Copyright Â© HatioLab Inc. All rights reserved.
-->

<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../bower_components/paper-spinner/paper-spinner-lite.html">

<dom-module id="mps-spinner">
  <template>
    <style>
      div#modal {
        display: grid;
        position: absolute;
        height: 100%;
        width: 100%;
      }
      div#modal[active] {
        z-index: 100;
      }
      paper-spinner-lite {
        margin: auto;
      }
    </style>

    <div id="modal">
      <paper-spinner-lite id="spinner"></paper-spinner-lite>
    </div>
  </template>

  <script>
    class MpsSpinner extends Polymer.Element {
      static get is() { return 'mps-spinner' }

      connectedCallback() {
        super.connectedCallback();
        window.mpsSpinner = this.$['spinner'];
        document.addEventListener('toggle-spinner', event => {
          let active = event.detail.active;
          this.$['spinner'].active = active;
          if(active) {
            this.getModal().setAttribute('active', '');
          } else {
            this.getModal().removeAttribute('active');
          }
        });
      }

      getModal() {
        return this.$['modal'];
      }
    }

    customElements.define(MpsSpinner.is, MpsSpinner);
  </script>
</dom-module>
